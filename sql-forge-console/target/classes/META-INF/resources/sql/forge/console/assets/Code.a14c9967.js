import{a as _,R as L,U as w,a1 as v,_ as x,g as b,h as y,i as z,r as R,af as S,bf as H,e as k,f as A}from"./index.ebdafb4c.js";var M=function(g){_(o,g);function o(t){var e=g.call(this,t)||this;return e.toDispose=[],e.codeRef=L.createRef(),e}return o.prototype.shouldComponentUpdate=function(t){return w(o.propsList,this.props,t)||this.resolveLanguage(this.props)!==this.resolveLanguage(t)||v(this.props)!==v(t)},o.prototype.componentDidMount=function(){var t=this;x(()=>import("./editor.main.71ff250e.js").then(function(e){return e.b}),["assets/editor.main.71ff250e.js","assets/editor.main.16b051fa.css","assets/index.ebdafb4c.js","assets/index.1954a546.css"]).then(function(e){return t.handleMonaco(e)})},o.prototype.componentDidUpdate=function(t){var e,a;return b(this,void 0,void 0,function(){var i,n,r,d,s,u,l;return y(this,function(c){switch(c.label){case 0:return i=this.props,n=this.codeRef.current,((e=this===null||this===void 0?void 0:this.monaco)===null||e===void 0?void 0:e.editor)&&n?(r=i.tabSize,d=(a=v(this.props))!==null&&a!==void 0?a:"",s=this.resolveLanguage(),u=this.registerAndGetTheme(),this.monaco.editor.setTheme(u),[4,this.monaco.editor.colorize(d,s,{tabSize:r})]):[3,2];case 1:l=c.sent(),n.innerHTML=l,c.label=2;case 2:return[2]}})})},o.prototype.handleMonaco=function(t){var e,a;return b(this,void 0,void 0,function(){var i,n,r,d,s,u;return y(this,function(l){switch(l.label){case 0:return t?(this.monaco=t,i=this.props.tabSize,n=(e=v(this.props))!==null&&e!==void 0?e:"",r=this.resolveLanguage(),d=this.codeRef.current,d&&((a=this.monaco)===null||a===void 0?void 0:a.editor)?(s=this.registerAndGetTheme(),this.monaco.editor.setTheme(s),[4,this.monaco.editor.colorize(n,r,{tabSize:i})]):[3,2]):[2];case 1:u=l.sent(),d.innerHTML=u,l.label=2;case 2:return[2]}})})},o.prototype.resolveLanguage=function(t){var e=t!=null?t:this.props,a=e.customLang,i=e.data,n=e.language,r=n===void 0?"plaintext":n;return z(r)&&(r=R(r,i)),a&&a.name&&(r=a.name),r},o.prototype.registerAndGetTheme=function(){var t,e,a,i,n=this.monaco,r=this.props,d=r.theme,s=r.editorTheme;if(s=s||(d==="dark"?"vs-dark":"vs"),!n)return s;if(this.customLang&&this.customLang.name&&Array.isArray(this.customLang.tokens)&&this.customLang.tokens.length){var u=this.customLang.name,l=((a=this.customLang)===null||a===void 0?void 0:a.colors)&&S((i=this.customLang)===null||i===void 0?void 0:i.colors)?this.customLang.colors:{};n.languages.register({id:u});var c=[],f=[];try{for(var m=H(this.customLang.tokens),h=m.next();!h.done;h=m.next()){var p=h.value,C=new RegExp(p.regex,p.regexFlags||void 0);c.push([C,p.name]),f.push({token:p.name,foreground:p.color,background:p.background,fontStyle:p.fontStyle})}}catch(T){t={error:T}}finally{try{h&&!h.done&&(e=m.return)&&e.call(m)}finally{if(t)throw t.error}}return n.languages.setMonarchTokensProvider(u,{tokenizer:{root:c}}),n.editor.defineTheme(u,{base:"vs",inherit:!1,rules:f,colors:l}),u}return s},o.prototype.render=function(){var t=v(this.props),e=this.props,a=e.className,i=e.maxHeight,n=e.style,r=n===void 0?{}:n,d=e.classnames,s=e.editorTheme,u=e.customLang,l=e.wordWrap,c=e.wrapperComponent,f=this.resolveLanguage(),m=typeof t=="string"&&t.split(/\r?\n/).length>1,h=c||(m?"pre":"code");return u&&(this.customLang=u),i&&(r.maxHeight=r.maxHeight||i,r.overflow="auto"),L.createElement(h,{ref:this.codeRef,className:d("Code",{"Code--dark":s&&["vs-dark","hc-black"].includes(s),"Code-pre-wrap":h==="pre","word-break":l},a),style:r,"data-lang":f},t)},o.propsList=["language","editorTheme","tabSize","wordWrap","customLang","style"],o.defaultProps={language:"plaintext",tabSize:4,wordWrap:!0},o}(L.Component),D=function(g){_(o,g);function o(){return g!==null&&g.apply(this,arguments)||this}return o=k([A({type:"code"})],o),o}(M);export{D as CodeRenderer,M as default};
