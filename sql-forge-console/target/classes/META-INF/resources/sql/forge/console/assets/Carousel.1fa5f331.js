import{cO as _,cP as H,cQ as G,a as Z,R as i,a1 as Y,ay as he,r as me,g as K,h as Q,I as C,d as y,al as ve,cR as $,cN as fe,J as q,K as ye,e as d,m as v,n as o,o as ge,f as we,y as U,b as Ee,a7 as Se,cL as Me,H as Ne}from"./index.c5bf8125.js";var O,Te=(O={},O[_]="in",O[H]="in",O[G]="out",O),xe={component:function(h){var t=h.data||{},e=h.thumbMode,a=h.classnames;return i.createElement(i.Fragment,null,t.hasOwnProperty("image")?i.createElement(Me,{src:t.image,title:t.hasOwnProperty("title")?t.title:"",href:t.hasOwnProperty("href")?t.href:"",blank:t.hasOwnProperty("blank")?t.blank:!1,htmlTarget:t.hasOwnProperty("htmlTarget")?t.htmlTarget:"",caption:t.hasOwnProperty("description")?t.description:"",thumbMode:t.hasOwnProperty("thumbMode")?t.thumbMode:e!=null?e:"contain",imageMode:"original",className:a("Carousel-image")}):t.hasOwnProperty("html")?i.createElement(Ne,{html:t.html,filterHtml:h.env.filterHtml}):t.hasOwnProperty("item")?i.createElement("span",null,t.item):i.createElement("p",null))}},z=20,Ce=function(h){Z(t,h);function t(){var e=h!==null&&h.apply(this,arguments)||this;return e.wrapperRef=i.createRef(),e.state={current:0,options:e.props.options||Y(e.props)||[],nextAnimation:"",mouseStartLocation:null,isPaused:!1},e.loading=!1,e.marqueeRef=i.createRef(),e.contentRef=i.createRef(),e}return t.prototype.componentDidMount=function(){this.prepareAutoSlide(),this.props.animation==="marquee"&&this.marquee()},t.prototype.componentDidUpdate=function(e){var a=this.props,r=a.options||Y(a)||[],n=e.options||Y(e)||[];he(n,r)&&this.setState({options:r}),this.props.animation==="marquee"&&e.animation!=="marquee"&&this.marquee()},t.prototype.componentWillUnmount=function(){this.clearAutoTimeout(),cancelAnimationFrame(this.marqueeRequestId)},t.prototype.marquee=function(){var e=this;if(!(!this.marqueeRef.current||!this.contentRef.current)){var a=0,r=performance.now(),n=this.contentRef.current,s=function(u){var c,l,m=u-r;r=u;var M=(l=(c=e.marqueeRef.current)===null||c===void 0?void 0:c.offsetWidth)!==null&&l!==void 0?l:0;if(!e.state.isPaused){var x=M*(m/e.props.duration);a+=-x;var N=n.scrollWidth/2;Math.abs(a)>=N&&(a=0),n.style.transform="translateX(".concat(a,"px)")}e.marqueeRequestId=requestAnimationFrame(s)};this.marqueeRequestId=requestAnimationFrame(s)}},t.prototype.doAction=function(e,a,r,n){var s=e==null?void 0:e.actionType;~["next","prev"].indexOf(s)?this.autoSlide(s):s==="goto-image"&&this.changeSlide((n==null?void 0:n.activeIndex)-1)},t.prototype.prepareAutoSlide=function(){if(!(this.state.options.length<2)&&(this.clearAutoTimeout(),this.props.auto)){var e=this.props.interval;this.intervalTimeout=setTimeout(this.autoSlide,typeof e=="string"?me(e,this.props.data)||5e3:e)}},t.prototype.autoSlide=function(e){this.clearAutoTimeout();var a=this.props.animation,r=this.state.nextAnimation;switch(e){case"prev":a==="slide"?r="slideRight":r="",this.transitFramesTowards("right",r);break;case"next":default:r="",this.transitFramesTowards("left",r);break}this.durationTimeout=setTimeout(this.prepareAutoSlide,this.props.duration)},t.prototype.transitFramesTowards=function(e,a){return K(this,void 0,void 0,function(){var r,n,s,u,c,l;return Q(this,function(m){switch(m.label){case 0:if(r=this.state.current,n=r,this.props.loop===!1&&(r===0&&e==="right"||r===this.state.options.length-1&&e==="left"))return[2];switch(e){case"left":r=this.getFrameId("next");break;case"right":r=this.getFrameId("prev");break}return s=this.props,u=s.dispatchEvent,c=s.data,[4,u("change",U(c,{activeIndex:r+1,prevIndex:n}))];case 1:return l=m.sent(),l!=null&&l.prevented?[2]:(this.setState({current:r,nextAnimation:a}),[2])}})})},t.prototype.getFrameId=function(e){var a=this.state,r=a.options,n=a.current,s=r.length;switch(e){case"prev":return(n-1+s)%s;case"next":return(n+1)%s;default:return n}},t.prototype.next=function(){var e=this.props.multiple;this.loading&&e&&e.count>1||this.autoSlide("next")},t.prototype.prev=function(){var e=this.props.multiple;this.loading&&e&&e.count>1||this.autoSlide("prev")},t.prototype.clearAutoTimeout=function(){clearTimeout(this.intervalTimeout),clearTimeout(this.durationTimeout)},t.prototype.changeSlide=function(e){return K(this,void 0,void 0,function(){var a,r,n,s,u,c;return Q(this,function(l){switch(l.label){case 0:return a=this.state.current,r=this.props,n=r.dispatchEvent,s=r.data,u=r.multiple,this.loading&&u&&u.count>1?[2]:[4,n("change",U(s,{activeIndex:e,prevIndex:a}))];case 1:return c=l.sent(),c!=null&&c.prevented?[2]:(this.setState({current:e}),[2])}})})},t.prototype.renderDots=function(){var e=this,a=this.props.classnames,r=this.state,n=r.current,s=r.options;return i.createElement("div",{className:a("Carousel-dotsControl"),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},Array.from({length:s.length}).map(function(u,c){return i.createElement("span",{key:c,onClick:function(){return e.changeSlide(c)},className:a("Carousel-dot",n===c?"is-active":"")})}))},t.prototype.renderArrows=function(){var e=this.props.classnames;return i.createElement("div",{className:e("Carousel-arrowsControl"),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.createElement("div",{className:e("Carousel-leftArrow"),onClick:this.prev},i.createElement(C,{icon:"left-arrow",className:"icon"})),i.createElement("div",{className:e("Carousel-rightArrow"),onClick:this.next},i.createElement(C,{icon:"right-arrow",className:"icon"})))},t.prototype.handleMouseEnter=function(){var e=this.props.multiple;e&&e.count>1||this.clearAutoTimeout()},t.prototype.handleMouseLeave=function(){var e=this.props.multiple;e&&e.count>1||this.prepareAutoSlide()},t.prototype.getNewOptions=function(e,a){a===void 0&&(a=1);var r=e;if(Array.isArray(e)&&e.length){r=new Array(e.length);for(var n=0;n<e.length;n++){r[n]=new Array(a);for(var s=0;s<a;s++)r[n][s]=e[(n+s)%e.length]}}return r},t.prototype.getEventScreenXY=function(e){var a,r,n,s,u,c,l,m;return e.screenX!==void 0?(l=e.screenX,m=e.screenY):!((a=e.touches)===null||a===void 0)&&a.length?(l=(r=e.touches[0])===null||r===void 0?void 0:r.screenX,m=(n=e.touches[0])===null||n===void 0?void 0:n.screenY):!((s=e.changedTouches)===null||s===void 0)&&s.length&&(l=(u=e.changedTouches[0])===null||u===void 0?void 0:u.screenX,m=(c=e.changedTouches[0])===null||c===void 0?void 0:c.screenY),{screenX:l,screenY:m}},t.prototype.addMouseDownListener=function(e){var a=this.props.direction,r=this.getEventScreenXY(e),n=r.screenX,s=r.screenY,u=a==="vertical"?s:n;u!==void 0&&this.setState({mouseStartLocation:u})},t.prototype.addMouseUpListener=function(e){var a=this.getEventScreenXY(e),r=a.screenX,n=a.screenY,s=this.props.direction,u=s==="vertical"?n:r;this.state.mouseStartLocation!==null&&u!==void 0&&(u-this.state.mouseStartLocation>z?this.autoSlide("prev"):this.state.mouseStartLocation-u>z&&this.autoSlide(),this.setState({mouseStartLocation:null}))},t.prototype.render=function(){var e,a,r=this,n=this.props,s=n.render,u=n.className,c=n.style,l=n.classnames,m=n.itemSchema,M=n.animation,x=n.width,N=n.height,W=n.controls,ee=n.controlsTheme,te=n.placeholder,re=n.data,ne=n.name,b=n.duration,A=n.multiple,ae=n.alwaysShowArrow,E=n.icons,L=n.id,B=n.wrapperCustomStyle,oe=n.env,F=n.themeCss,X=this.state,S=X.options,j=X.current,ie=X.nextAnimation,k=null,R=c?y({},c):{};x&&(isNaN(Number(x))?R.width=x:R.width=x+"px"),N&&(isNaN(Number(N))?R.height=N:R.height=N+"px");var V=ve([W.indexOf("dots")>-1&&M!=="marquee",W.indexOf("arrows")>-1&&M!=="marquee"],2),se=V[0],J=V[1],P=ie||M;if(Array.isArray(S)&&S.length){var p=1;A&&typeof A.count=="number"&&A.count>=2&&(p=Math.floor(A.count)<S.length?Math.floor(A.count):S.length);var D=this.getNewOptions(S,p),le=p>1&&typeof b=="number"?"".concat(b,"ms"):b||"500ms",ue=p>1&&typeof b=="number"?b:500,ce=(e={},e[_]=0,e[H]=0,e[G]=P==="slideRight"?100/p:-100/p,e[$]=P==="slideRight"?-100/p:100/p,e),pe=p>1?y({transitionTimingFunction:"linear",transitionDuration:le},M==="slide"?{transform:"translateX(".concat(ce[status],"%)")}:{}):{},I=function(w){var g,f=w.itemSchema,T=Ee(w,["itemSchema"]);return s("".concat(j,"/body"),f||m?f||m:xe,{thumbMode:r.props.thumbMode,data:U(re,Se(w)?T:(g={item:w},g[ne]=w,g))})};k=M==="marquee"?i.createElement("div",{ref:this.marqueeRef,className:l("Marquee-container"),onMouseEnter:function(){return r.setState({isPaused:!0})},onMouseLeave:function(){return r.setState({isPaused:!1})},style:{width:"100%",height:N}},i.createElement("div",{className:l("Marquee-content"),ref:this.contentRef},S.concat(S).map(function(w,g){return i.createElement("div",{key:g,className:l("Marquee-item")},p===1?I(w):null,p>1?D.concat(D)[g].map(function(f,T){return i.createElement("div",{key:T,style:{width:100/p+"%",height:"100%",float:"left"}},I(f))}):null)}))):i.createElement("div",{ref:this.wrapperRef,className:l("Carousel-container"),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},S.map(function(w,g){return i.createElement(fe,{mountOnEnter:!0,unmountOnExit:!0,in:g===j,timeout:ue,key:g},function(f){return f===_&&r.wrapperRef.current&&r.wrapperRef.current.childNodes.forEach(function(T){return T.offsetHeight}),p>1&&((f===_||f===G)&&!r.loading?r.loading=!0:(f===H||f===$)&&r.loading&&(r.loading=!1)),i.createElement("div",{className:l("Carousel-item",P,Te[f]),style:pe},p===1?I(w):null,p>1?D[g].map(function(T,de){return i.createElement("div",{key:de,style:{width:100/p+"%",height:"100%",float:"left"}},I(T))}):null)})}))}return i.createElement("div",{className:l("Carousel Carousel--".concat(ee),(a={},a["Carousel-arrow--always"]=!!ae,a),u,q(y(y({},this.props),{name:"baseControlClassName",id:L,themeCss:F})),q(y(y({},this.props),{name:"wrapperCustomStyle",id:L,themeCss:B})),{"Carousel-vertical":this.props.direction==="vertical"}),onMouseDown:this.props.mouseEvent?this.addMouseDownListener:void 0,onMouseUp:this.props.mouseEvent?this.addMouseUpListener:void 0,onMouseLeave:this.props.mouseEvent?this.addMouseUpListener:void 0,onTouchStart:this.props.mouseEvent?this.addMouseDownListener:void 0,onTouchEnd:this.props.mouseEvent?this.addMouseUpListener:void 0,style:R},k||te,se?this.renderDots():null,J?i.createElement("div",{className:l("Carousel-leftArrow",q(y(y({},this.props),{name:"galleryControlClassName",id:L,themeCss:F}))),onClick:this.prev},E!=null&&E.prev?i.createElement("div",{className:"ImageGallery-prevBtn"},i.createElement(C,{icon:E.prev})):i.createElement(C,{icon:"left-arrow",className:"icon",iconContent:"ImageGallery-prevBtn"})):null,J?i.createElement("div",{className:l("Carousel-rightArrow",q(y(y({},this.props),{name:"galleryControlClassName",id:L,themeCss:F}))),onClick:this.next},E!=null&&E.next?i.createElement("div",{className:"ImageGallery-prevBtn"},i.createElement(C,{icon:E.next})):i.createElement(C,{icon:"right-arrow",className:"icon",iconContent:"ImageGallery-nextBtn"})):null,i.createElement(ye,y({},this.props,{config:{wrapperCustomStyle:B,id:L,themeCss:F,classNames:[{key:"baseControlClassName"},{key:"galleryControlClassName",weights:{default:{suf:" svg",important:!0}}}]},env:oe})))},t.defaultProps={auto:!0,interval:5e3,duration:500,controlsTheme:"light",animation:"fade",controls:["dots","arrows"],placeholder:"-",multiple:{count:1},alwaysShowArrow:!1},d([v,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"prepareAutoSlide",null),d([v,o("design:type",Function),o("design:paramtypes",[String]),o("design:returntype",void 0)],t.prototype,"autoSlide",null),d([v,o("design:type",Function),o("design:paramtypes",[String,String]),o("design:returntype",Promise)],t.prototype,"transitFramesTowards",null),d([v,o("design:type",Function),o("design:paramtypes",[String]),o("design:returntype",void 0)],t.prototype,"getFrameId",null),d([v,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"next",null),d([v,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"prev",null),d([v,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"clearAutoTimeout",null),d([v,o("design:type",Function),o("design:paramtypes",[Number]),o("design:returntype",Promise)],t.prototype,"changeSlide",null),d([v,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"handleMouseEnter",null),d([v,o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",void 0)],t.prototype,"handleMouseLeave",null),d([v,o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],t.prototype,"addMouseDownListener",null),d([v,o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],t.prototype,"addMouseUpListener",null),t}(i.Component),Ae=function(h){Z(t,h);function t(e,a){var r=h.call(this,e)||this,n=a;return n.registerComponent(r),r}return t.prototype.componentWillUnmount=function(){var e;(e=h.prototype.componentWillUnmount)===null||e===void 0||e.call(this);var a=this.context;a.unRegisterComponent(this)},t.contextType=ge,t=d([we({type:"carousel"}),o("design:paramtypes",[Object,Object])],t),t}(Ce);export{Ce as Carousel,Ae as CarouselRenderer};
