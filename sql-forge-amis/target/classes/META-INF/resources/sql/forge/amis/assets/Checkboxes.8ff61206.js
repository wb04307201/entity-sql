import{bl as z,bm as q,a as j,R as r,W as G,aZ as Z,aN as D,y as J,T as K,I as E,bn as L,bo as M,bp as U,bq as V,J as H,d as B,S as Q,K as X,e as k,m as x,n as c,Z as Y,b4 as ee}from"./index.cf5795ed.js";var te=Math.max,ae=Math.min;function ne(p,a,e){return p>=ae(a,e)&&p<te(a,e)}var le=ne,se=le,W=z,oe=q;function ie(p,a,e){return a=W(a),e===void 0?(e=a,a=0):e=W(e),p=oe(p),se(p,a,e)}var re=ie,ce=function(p){j(a,p);function a(){var e=p!==null&&p.apply(this,arguments)||this;return e.checkboxRef=r.createRef(),e.childRefs=[],e}return a.prototype.doAction=function(e,t,s){var o,n,l=this.props,h=l.resetValue,u=l.onChange,d=l.formStore,b=l.store,f=l.name,C=e==null?void 0:e.actionType;if(C==="clear")u("");else if(C==="reset"){var v=(n=G((o=d==null?void 0:d.pristine)!==null&&o!==void 0?o:b==null?void 0:b.pristine,f))!==null&&n!==void 0?n:h;u(v!=null?v:"")}},a.prototype.reload=function(e,t){var s=this.props.reloadOptions;s&&s(e,t)},a.prototype.handleAddClick=function(){var e=this.props.onAdd;e&&e()},a.prototype.handleEditClick=function(e,t){var s=this.props.onEdit;e.preventDefault(),e.stopPropagation(),s&&s(t)},a.prototype.handleDeleteClick=function(e,t){var s=this.props.onDelete;e.preventDefault(),e.stopPropagation(),s&&s(t)},a.prototype.componentDidMount=function(){this.updateBorderStyle();var e=Z(this.updateBorderStyle,100);this.checkboxRef.current&&(this.checkboxRefObserver=new ResizeObserver(e),this.checkboxRefObserver.observe(this.checkboxRef.current))},a.prototype.componentWillUnmount=function(){var e;(e=this.checkboxRefObserver)===null||e===void 0||e.disconnect()},a.prototype.updateBorderStyle=function(){if(this.props.optionType==="button"&&!!this.childRefs.length){var e=this.childRefs.map(function(d){return d==null?void 0:d.ref}),t=e[0].labelRef.current.offsetTop,s=[],o=e.length;s[0]="first";for(var n=0,l=1;l<o;l++){var h=e[l],u=h.labelRef.current.offsetTop;s[l]="",u!==t&&(s[l]="first",s[l-1]+=" last",n=l,t=u)}s[o-1]+=" last",s.forEach(function(d,b){b>=n&&(d+=" last-line"),e[b].setClassName(d)})}},a.prototype.renderGroup=function(e,t){var s=this,o,n=this.props,l=n.classnames,h=n.labelField;if(!(!((o=e.children)===null||o===void 0)&&o.length))return null;var u=e.children.map(function(b,f){return s.renderItem(b,f)}),d=this.columnsSplit(u);return r.createElement("div",{key:"group-"+t,className:l("CheckboxesControl-group",e.className)},r.createElement("label",{className:l("CheckboxesControl-groupLabel",e.labelClassName)},e[h||"label"]),d)},a.prototype.addChildRefs=function(e){e&&this.childRefs.push(e)},a.prototype.renderItem=function(e,t){var s=this,o;if(!((o=e.children)===null||o===void 0)&&o.length)return this.renderGroup(e,t);var n=this.props,l=n.render,h=n.itemClassName,u=n.onToggle,d=n.selectedOptions,b=n.disabled,f=n.inline,C=n.labelClassName,v=n.labelField,R=n.removable,S=n.editable,A=n.translate,F=n.optionType,g=n.menuTpl,O=n.data,N=n.classnames,y=n.testIdBuilder,T=String(e[v||"label"]),_=e.labelClassName,I=y==null?void 0:y.getChild("item-"+T||t),i=b||e.disabled;return r.createElement(D,{className:h,key:t,onChange:function(){return u(e)},checked:!!~d.indexOf(e),disabled:i,inline:f,labelClassName:_||C,description:e.description,optionType:F,testIdBuilder:I,ref:this.addChildRefs},g?l("checkboxes/".concat(t),g,{data:J(O,e)}):T,e.disabledTip&&i?r.createElement(K,{placement:"right",tooltip:e.disabledTip,trigger:"hover"},r.createElement("a",{className:N("Select-option-disabledTip")},r.createElement(E,{className:"icon",icon:"question2"}))):null,R&&L(e,"removable")?r.createElement("a",{"data-tooltip":A("Select.clear"),"data-position":"left"},r.createElement(E,{icon:"minus",className:"icon",onClick:function(m){return s.handleDeleteClick(m,e)}})):null,S&&L(e,"editable")?r.createElement("a",{"data-tooltip":"\u7F16\u8F91","data-position":"left"},r.createElement(E,{icon:"pencil",className:"icon",onClick:function(m){return s.handleEditClick(m,e)}})):null)},a.prototype.columnsSplit=function(e){var t=this.props,s=t.columnsCount,o=t.classnames,n=[],l=[];return e.forEach(function(h){h&&h.key&&String(h.key).startsWith("group")?(l.length&&(n.push(M(l,o,s)),l=[]),n.push(h)):l.push(h)}),l.length&&n.push(M(l,o,s)),n},a.prototype.render=function(){var e=this,t=this.props,s=t.className;t.style;var o=t.disabled,n=t.placeholder,l=t.options,h=t.inline;t.columnsCount;var u=t.selectedOptions;t.onToggle;var d=t.onToggleAll,b=t.checkAll,f=t.checkAllText,C=t.classnames,v=t.itemClassName,R=t.labelClassName,S=t.creatable,A=t.addApi,F=t.createBtnLabel,g=t.translate,O=t.optionType,N=t.loading,y=t.loadingConfig,T=t.themeCss,_=t.id,I=t.env,i=t.classPrefix,m=[];l&&l.length&&(m=l.map(function(P,$){return e.renderItem(P,$)})),b&&m.length&&O==="default"&&m.unshift(r.createElement(D,{key:"checkall",className:v,onChange:d,checked:!!u.length,partial:re(u.length,0,U(l).length),disabled:o,inline:h,labelClassName:R},f!=null?f:g("Checkboxes.selectAll"))),m=this.columnsSplit(m);var w=V(T,"checkboxes");return r.createElement("div",{className:C("CheckboxesControl",s,H(B(B({},this.props),{name:["checkboxesControlClassName","checkboxesControlCheckedClassName","checkboxesClassName","checkboxesCheckedClassName","checkboxesInnerClassName","checkboxesShowClassName"],id:_,themeCss:w}))),ref:this.checkboxRef},m&&m.length?m:N?null:r.createElement("span",{className:"Form-placeholder"},g(n)),N?r.createElement(Q,{show:!0,icon:"reload",size:"sm",spinnerClassName:C("Checkboxes-spinner"),loadingConfig:y}):null,(S||A)&&!o?r.createElement("a",{className:C("Checkboxes-addBtn"),onClick:this.handleAddClick},r.createElement(E,{icon:"plus",className:"icon"}),g(F)):null,r.createElement(X,B({},this.props,{config:{themeCss:w,classNames:[{key:"checkboxesControlClassName",weights:{default:{inner:".".concat(i,"Checkbox:not(.checked):not(.disabled)")},hover:{suf:" .".concat(i,"Checkbox:not(.disabled):not(.checked)")},disabled:{inner:".".concat(i,"Checkbox.disabled:not(.checked)")}}},{key:"checkboxesControlCheckedClassName",weights:{default:{inner:".".concat(i,"Checkbox.checked:not(.disabled)")},hover:{suf:" .".concat(i,"Checkbox.checked:not(.disabled)")},disabled:{inner:".".concat(i,"Checkbox.checked.disabled")}}},{key:"checkboxesClassName",weights:{default:{inner:".".concat(i,"Checkbox:not(.checked):not(.disabled) > i")},hover:{suf:" .".concat(i,"Checkbox:not(.disabled):not(.checked)"),inner:"> i"},disabled:{inner:".".concat(i,"Checkbox.disabled:not(.checked) > i")}}},{key:"checkboxesCheckedClassName",weights:{default:{inner:".".concat(i,"Checkbox:not(.disabled) > i")},hover:{suf:" .".concat(i,"Checkbox:not(.disabled)"),inner:"> i"},disabled:{inner:".".concat(i,"Checkbox.disabled > i")}}},{key:"checkboxesInnerClassName",weights:{default:{inner:".".concat(i,"Checkbox:not(.disabled) > i .icon")},hover:{suf:" .".concat(i,"Checkbox:not(.disabled)"),inner:"> i .icon"},disabled:{inner:".".concat(i,"Checkbox.disabled > i .icon")}}},{key:"checkboxesShowClassName",weights:{default:{inner:".".concat(i,"Checkbox > i")}}}],id:_},env:I})))},a.defaultProps={columnsCount:1,multiple:!0,placeholder:"placeholder.noOption",creatable:!1,inline:!0,createBtnLabel:"Select.createLabel",optionType:"default"},k([x,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],a.prototype,"handleAddClick",null),k([x,c("design:type",Function),c("design:paramtypes",[Event,Object]),c("design:returntype",void 0)],a.prototype,"handleEditClick",null),k([x,c("design:type",Function),c("design:paramtypes",[Event,Object]),c("design:returntype",void 0)],a.prototype,"handleDeleteClick",null),k([x,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],a.prototype,"updateBorderStyle",null),k([x,c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],a.prototype,"addChildRefs",null),k([Y(),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],a.prototype,"render",null),a}(r.Component),he=function(p){j(a,p);function a(){return p!==null&&p.apply(this,arguments)||this}return a=k([ee({type:"checkboxes",sizeMutable:!1,thin:!0})],a),a}(ce);export{he as CheckboxesControlRenderer,ce as default};
